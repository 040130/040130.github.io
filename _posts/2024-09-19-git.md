---
title: git
date: 2019-09-19
background: /assets/t_2.png
---

## 什么是git?主要特点是什么？

git是一种分布式版本控制系统，用于追踪和管理文件的变化，由`linux`之父林纳斯基于C语言开发的。

特点：

- **分布式：** 每个开发者都有完整的代码仓库副本，可以在本地进行工作，无需依赖中央服务器。
- **强大的分支支持：** Git以分支为核心，轻松创建、合并和管理分支，方便并行开发和特性隔离。
- **快速和高效：** Git通过对文件和内容进行快速哈希计算来实现高效的版本控制。
- **完整性和安全性：** Git使用`SHA-1`哈希来确保数据的完整性，并提供认证和加密功能以确保安全性。

## git的工作原理是什么？

`git`基于快照（`snapshot`）而非差异（`diff`）的方式来处理文件变化。它将文件和目录的快照保存在一个称为“仓库（`repository`）”的数据库中。当提交（`commit`）时，`Git`会创建一个指向该快照的指针，并将该指针添加到版本历史中。`Git`使用分支（`branch`）来指向不同的提交，从而支持并行开发和特性隔离。

## 为什么要用版本控制系统？

1. 它是分布式，相交于集中式更快。速度极快。
2. 可撤销还原，`git`里面总是有后悔药可吃的。
3. 多人协作，冲突优雅的解决
4. 支持分支管理
5. 远程仓库管理

## 集中式和分布式版本控制系统的区别？

集中式`SVN`，分布式`git`，区别如下：

集中式的缺点：

1. 必须联网才能工作

2. 中央服务器出问题了，就没法工作

3. 分支速度慢


分布式的优点：

1. 不需要联网，也可以工作。
2. 没有中央服务，每台自己就是服务器。
3. 没有全局分支，自己的服务器可以创建`n`个分支，速度极快。

## git的结构

### 什么是本地仓库？

在你的本地电脑，当你使用`git init`命令就可以创建一个空的本地仓库，它以一个隐藏文件夹名为`.git`的存在

### 什么是远程仓库？

远程仓库是指存在上互联网上，可以供访客下载的公众仓库。提供项目托管的网站比较著名的有`github`、`gitee`

### 什么是工作区？

工作区就是您本地电脑，或者说在您的本地仓库里面进行写作的文件夹下。

### 什么是暂存盘？

在工作区中写作，修改了内容，如果要提前一个版本，必须要先添加到暂存盘，才可以提交版本。

### 什么是版本库？

版本库就是相当于完成了一些重要操作，存一个记录，方便以后可以回退，撤销。

## git常用的指令

### git init

创建一个git空仓库，表示git接管整个项目，尽量避免在仓库里面又包含仓库。输入该指令之后，发现会自动生成一个`.git`文件夹，它是半透明的效果，如果你没有看到这个文件夹，因为它是隐藏文件，你可以选择window上的菜单，选择查看，然后勾选隐藏的项目，即可看到隐藏的文件。

git 它会检测文件的改变，表现在它可以知道新增了文件，删除了文件，文件改了什么内容？删了什么内容? 都可以被git识别到。但是有一些例外，如果是二进制的文件，它只能检测文件增加了，文件删除了，不能检测文件内容具体有什么改变。

特别注意：很多人喜欢用`work`文档来写作，但是注意`git`不能很好支持`doc`文档。因为`doc`文件它是二进制文件，`git`没有办法检测到`doc`文档里面具体内容的改变，只能知道doc文件它大小改变了，文件新增或者删除了，这样就不能很多支持版本回退，多人协作。你可以选择记事本文件（`.txt`），但是`txt`文件它不支持图片插入。这时你可以选择一种`markdown`文件（`.md`）新型流行的写作格式文档。

常见的二进制文件：

1. 图片
2. 音频
3. 视频
4. `doc`文档、`xls`表格、`ppt`幻灯

### git config

`git config` 用于配置git账户，注意如果你要上传你的项目到`github`远程仓库中，git要求你必须配置账户，不然不让你推送你的仓库。

具体配置方法：

> 注意 
>
> 以下命令再任何位置打开终端（cmd、powershell、git bash）执行即可

第一步：配置用户名

```bash
git config --global user.name "gongxian" 
```

第二步：配置邮箱

```bash
git config --global user.email "xianweb@qq.com"
```

第三步：配置`git`打开的编辑器

```bash
# 设置编辑器为记事本，默认是linux的VIM编辑器，注意你确认您的记事本在C盘路径下
git config --global core.editor "C:/Windows/notepad.exe"
```

第四步：确认是否配置成功

```bash
git config --list
```

如果在清单里面发现你配置的信息，表示配置成功！

**git config --list**：该指令用于查看配置详情信息

用法如下：

```bash
git config --list
```

### git clone

git clone 克隆命令采用静默的方式下载远程仓库到本地，极大的提高下载包的效率。

> 什么是静默的方式？
>
> 答：就下载包的过程中不需要你手动去做什么，比如另存为，解压，安装下一步等操作，它会给一步到位。

语法如下：

```bash
# 语法如下
git clone 远程仓库地址

# https协议仓库地址
git clone https://gitee.com/QiuShuiYueYunFeng/loadsh.git

# ssh协议仓库地址
git clone git@gitee.com:QiuShuiYueYunFeng/loadsh.git
```

>  项目无法克隆到本地的原因有哪些？
>
>  1. 克隆的地址的错了
>  2. 私有项目，没有克隆权限
>  3. 网络问题导致长时间无法下载，常见原因是项目在海外服务器

### git add

`git add `用来添加文件到暂存盘的命令

语法如下：

```bash
# 单条添加
git add abc.txt

# 多条添加
git add abc.txt  efg.xls  123.jpg

# 添加某个目录(images)下所有文件
git add ./images

# 添加所有文件
git add -A
```

### git commit

`git commit`用来提交一个版本的

语法如下：

```bash
# 初始化一个仓库
git init

# 添加到暂存盘
git add -A

# 提交一个版本
git commit -m "我的第一个版本"

# 查看已经提交过的版本
git log
```

> 注意事项
>
> 1. 必须要先提交到`git add`暂存盘，然后才可以`git commit`提交版本
> 2. `git commit -m`  后面一定要写描述文字，方便以后查看回退的具体内容
> 3. `-m`之间不要有空格，否则失效
> 4. `-m`后要有空格，并且是英文状态下双引号

**提交一个版本的具体步骤：**

1. 在桌面新建一个`myproject`文件夹，然后进入`myproject`文件夹，在`myproject`文件夹下打开`git bash`终端或者打开`cmd`都可以，输入`git init`命令创建一个空的仓库。
2. 创建好`git`本地仓库后，在工作区新建`readme.txt`，然后打开`readme.txt`输入内容为“狂飙：第1集”并保存
3. 关闭记事本，在`git bash`终端中输入`git add -A`添加所有文件到暂存盘
4. 继续输入`git commit -m "狂飙：第1集"`提交一个版本到版本库
5. 以上就是完成一个版本提交的具体过程，使用`git log`查看当前版本情况
6. 按照以上步骤添加3个版本

### git log

查看过往的版本到你当前的版本之间所有的版本记录，包含信息有完整版本号、作者、时间、版本描述、当前版本所在位置

语法如下：

```bash
git log
```

### git reflog

查看_所有_的版本记录，包含信息有短版本号、版本描述、当前版本所在位置

语法如下：

```bash
git reflog
```

### 回退上一个版本

语法如下：

```bash
# 查看当前版本
git log

# 开始回退到上一个版本
# --hard 表示努力的、仔细的回退，回退的很细，但是慢。
# HEAD 表示当前分支
# ^ 表示上一个，^^ 表示上一个的上一个，^要和HEAD贴紧不要空格
git reset --hard HEAD^
```

### 回退到指定的版本

通过此方法可以回退到任何版本

语法如下：

```bash
# 查看所有的版本
git reflog

# 回退到指定的版本
git reset --hard 版本号（支持短的版本号）

# 示例代码
git reset --hard d20fa43
```

### git status

`git status` 用来查看状态信息，可以查看的信息有：文件新增了？文件删除了？文件内容改变了？

> 注意
>
> 对于二进制文件（doc、xls、mp4、jpg等），不能识别内容改变的细节，只能识别是否被修改了。

### git diff

`git diff` 用于显示工作区和暂存盘之间的差异，还可以查看分支之间差异

练习步骤：

1. 先打开`readme.txt`然后再内容的后面，加上一些文字，比如加上"添加到暂存盘"，关闭保存
2. 输入`git add -A`添加到暂存盘
3. 打开`readme.txt` 修改一下内容，比如把"添加到暂存盘"修改为"删除了"
4. 输入`git diff`可以查看工作区和暂存盘之间的差异
5. 以下是显示的差异信息

## 撤销修改

### 工作区撤销操作

语法如下：

```bash
# 开始从工作区撤销，注意此时尚未git add添加到暂存盘
git checkout -- readme.txt
```

练习步骤：

1. 打开`readme.txt` 输入内容“我是老师”，保存退出记事本
2. 打开`git bash`终端，然后开始撤销上面的操作
3. 输入 `git status`查看哪些文件被修改了
4. 继续输入`git checkout -- readme.txt` 从工作区撤销更改
5. 注意，这里会撤销到_最近的一次_添加到暂存盘的状态

### 暂存盘撤销操作

语法如下：

```bash
# 查看状态
git status

# 开始从暂存盘撤销更改
git reset HEAD readme.txt
git checkout -- readme.txt
```

练习步骤：

1. 打开`readme.txt` 输入内容“我是老师”，保存退出记事本
2. 打开`git bash`终端，输入`git add -A`添加到暂存盘
3. 已经添加到暂存盘，接下来开始撤销更改
4. 输入`git reset HEAD readme.txt`
5. 输入`git checkout -- readme.txt`
6. 完成从暂存盘撤销操作，打开`readme.txt`发现已经恢复了

### 版本库撤销操作

回退到上一个版本

```bash
git reset --hard HEAD^
```

回退到指定的版本

```bash
git reset --hard 短版本号
```

### 删除撤销操作

只要该文件至少添加进一次版本，那么该文件永远可以恢复，哪怕它是永久性删除了。但是注意恢复过后可能会丢失一些信息

语法如下：

```bash
# 查看状态
git status

# 开始捡回被删除的文件
git checkout -- readme.txt
```

> 注意
>
> 只要这个文件被添加过版本库，那么它永远可以找回来，如果你想彻底的删除该文件，你可以使用`git rm readme.txt`的方式将这文件从版本库以及电脑磁盘上彻底删除。这样做之后，你使用`checkout`是无法捡回的。

## 远程仓库

### 常见远程仓库网站

1. **github**：是一个面向开源及私有软件项目的托管平台，只能使用git作为唯一的版本库格式进行托管，故而取名`github`。`github`是一个国际仓库，因为服务器是在境外，所以网络速度比较慢，经常打不开，或者下载不了。
2. **gitee**:  是国内一个面向开源及私有软件项目托管平台，它支持`git`或者`svn`两种版本库格式进行托管，因为是服务器在国内，所以速度很快，但是资源很少。
3. **gitlab**：是一款使用`java`写的软件项目托管平台，它是一个`web`程序包，你可以下载下来然后再公司的服务器假设一个内网的软件项目托管平台，访问大都是使用内网`ip`地址访问。

### 生成SSH key 公钥和私钥

生成公钥和私钥的好处是可以支持免密推送你的版本到远程仓库

具体步骤：

1. 任何地方打开`git bash`终端，输入`ssh-keygen -t rsa -C "xianweb@qq.com"`
2. 它会询问你是否要把公钥和私钥保存到括号中路径下？(Enter file in which to save the key？)，按`Enter`确认
3. 如果你之前已经生成过公钥和私钥，它会提醒你是否要覆盖它？(Overwrite (y/n)?)，选择`Y`覆盖
4. 接下来提醒你输入一个私钥（Enter passphrase (empty for no passphrase)），你也可以按`Enter`不提供，注意如果你写了私钥，每次推送都要再次输入私钥密码。
5. 再次要求你输入有一遍私钥，你也可以按`Enter`不提供
6. 恭喜，公钥和私钥生成成功!
7. 根据上面生成的路径，找到刚才生成的公钥`id_rsa.pub`，用记事本打开此文件，不要自动换行，拷贝里面的公钥内容

### 如何给gitee账户添加SSH公钥实现免密推送

具体步骤：

1. 登陆`gitee`账户，然后划过右上角头像，出现下拉菜单，选择设置菜单
2. 查看左侧侧边菜单，选择安全设置组，然后选择`SSH`公钥
3. 开始添加公钥，注意如果本地重新生成了公钥，那么之前的绑定就会立即失效
4. 输入标题，标题可以自定义。然后拷贝之前生成的公钥(`id_rsa.pub`）到文本框，然后提交即可

> 特别注意
>
> 如果你重新生成了公钥，那么`gitee`上面的绑定就会失效，需要你登陆`gitee`重新绑定一下，不然会影响后面使用`git push`推送版本到远程仓库

### 如何给github账户添加SSH公钥实现免密推送

具体步骤：

1. 登陆`github`账户，然后单击右上角头像，出现下拉菜单，选择`setting`
2. 查看左侧侧边菜单，选择`Access`组，然后选择 `SSH and GPG keys`菜单
3. 注意添加`SSH KEY`，`title`标题可以自定义命名
4. 然后拷贝之前生成的公钥(`id_rsa.pub`）到文本框，然后提交即可

### 远程仓库常见命令

#### git clone

该指令可以使用静默的方式下载远程仓库包

```bash
git clone 仓库地址(1.https协议 2.ssh协议)
```

#### git remote add

该指令用于添加一个远程仓库，给远程仓库地址去一个`别名`

语法如下：

```bash
# 基本语法
git remote add 仓库别名 仓库地址

# 示例代码(https)
git remote add origin https://gitee.com/gx0513/mobile_space.git

# 示例代码(ssh)
git remote add origin git@gitee.com:gx0513/mobile_space.git
```

> 注意
>
> 如果你使用`git clone`下载了远程仓库，那么该仓库会自动注册一个名叫`origin`的仓库，所以你无需使用`git remote add origin`去添加远程仓库

#### git remote

该指令用于查看远程仓库

语法如下： 

```bash
# 查看远程仓库绑定情况
git remote

# 查看远程仓库绑定详细情况，包含fetch拉取权限、push推送权限都可以看到
git remote -v
```

#### git remote rm

该指令用于删除指定的远程仓库

语法如下：

```bash
# 查看远程仓库列表
git remote

# 开始删除指定的远程仓库
git remote rm 远程仓库别名

# 示例操作
git remote 
git remote rm origin
git remote
```

#### git push

该指令用于将本地仓库推送到远程仓库，在推送过程中会产生一些"意外"的情况。

> 推送意外的情况如下
>
> 1. 远程仓库没有授权，导致无法推送，可以申请成为开发者，通过后可以推送
> 2. 远程仓库地址错了，是一个不存在的仓库地址，导致无法推送，写对仓库别名或者仓库地址
> 3. `SSH`公钥没有绑定，或者绑定了一个过期的公钥，导致无法推送，重新登陆远程仓库绑定`SSHkey`
> 4. 远程仓库已经有人比你更早的推送了一个版本，你推送会导致冲突。如何解决冲突，你应该下载最新的远程版本和本地的你的版本合并，然后再推送。
> 5. 如果远程仓库它也初始化了一个仓库，那么本地仓库和远程仓库它是各自独立的仓库，那么也不能推送。

语法如下：

```bash
# 推送到远程仓库之前，本地仓库至少需要一个版本，如果有版本就不需要下面的操作了
git init
git add -A
git commit -m "我的第一个版本"

# 开始添加远程仓库绑定（别名）,如果使用git remote查看发现之前已经绑定过，那么不需要下面的操作
git remote add 仓库别名 仓库地址

# 开始推送本地仓库到远程, -u表示一种安全的模式，-f表示强制推送, 分支名默认有主分支`master`,也有叫`main`
git push -u 仓库别名 分支名

# 如果你绑定了ssh公钥，那么推送过程是免密的，不需要输入密码

# 示例代码
git init
git add -A
git commit -m "init 初始化"

git remote add origin git@gitee.com:gx0513/store1.git
git remote

git push -u origin master
```

>推送时 `-u` 和 `-f` 模式的区别？
>
>1. `-u` 表示使用一种安全的策略推送你的仓库，比如发生冲突了它会停止推送版本
>2. `-f` 表示强制推送并且覆盖远程仓库上的版本，不安全很容易造成不可恢复的破坏

##### 两个不同的仓库如何推送到远程仓库？

具体步骤：

1. 首先在`gitee`中创建一个仓库，取名`store1`，勾选初始化仓库，设置模板，勾选Readme文件

2. 创建好远程仓库`store1`，注意此时远程仓库也初始化了一个独立的仓库

3. 在本地电脑创建一个文件夹`myproject`，进入`myproject`内，新建一个`readme.txt`输入一些内容

4. 打开终端`git bash`，输入`git init`初始化一个本地仓库，注意本地仓库和远程仓库两个是不同的仓库

5. 输入`git add -A`添加到暂存盘，输入`git commit -m "init 初始化"`提交一个版本

6. 输入`git remote add origin 刚才创建的远程仓库地址ssh协议的`

7. 输入`git push -u origin master` 发现推送不了，报错，原因是本地仓库和远程仓库是同的仓库。

8. 输入`git pull origin master --allow-unrelated-histories` 把远程仓库拉取到本地仓库进行合并

9. 会弹出编辑器，默认是`VIM`编辑器，输入`INSERT`键进入插入模式，可以写一些提示文字。写好后，然后按`ESC`退出插入模式进入命令模式，输入`:wq`保存并退出编辑

10. 完成上述操作之后，再使用`git push -u origin master`发现可以推送了


##### 两个相同的两个仓库如何推送到远程仓库？

具体步骤：

1. 首先在`gitee`中创建一个仓库，取名`store5`，勾选初始化仓库，设置模板，勾选Readme文件

2. 创建好远程仓库`store5`后，使用`git clone`命令下载`store5`仓库到本地，此时两个仓库是同一个仓库

3. 注意使用`git clone`下载下来的仓库，会自动在本地添加一个叫`origin`的远程仓库别名，也就是说你无需使用`git remote add`命令添加远程仓库，自动给你添加好了。

4. 此时可以修改一下本地文件，然后使用`git add -A`保存暂存盘，再使用`git commit -m `提交一个版本

5. 然后使用`git push -u origin master`推送本地仓库到远程

6. 以上便是两个相同仓库的推送操作


##### 多人协作开发过程

具体步骤：

1. 由龚贤在`gitee`上创建一个成语接龙项目`jielong2023`，龚贤就是这个项目的发起人
2. 然后龚贤在`jielong2023`项目详情中找到`管理`菜单，单击`管理`菜单
3. 进入管理菜单之后，看左侧菜单，选中`仓库成员管理`组，然后选择`开发者`菜单
4. 选择`添加仓库成员`，选择邀请用户，注意如果是私有项目最多只允许5个开发成员，可以设置为开源项目则没有限制
5. 将私有项目设置为开源项目：找到左侧菜单第一项`仓库设置`，选择`基本信息`菜单，右侧表单底部有`是否开源`单选框，选择开源，然后选择所有的承诺即可，完成开源设置
6. 回到`仓库成员管理`，单击左侧`开发者`，添加`仓库成员`，邀请用户，此时没有人数的限制。单击二维码上的按钮`复制链接`按钮，然后分发给其他参考开发的成员。成员只需要单击这个链接，即可自动成为`jielong2023`项目的开发者，你也可以勾选审核，这样需要你的审核才能成为开发者
7. 然后由龚贤使用`git clone`此项目到本地电脑，然后开始写成语接龙，比如龚贤先写`乘风破浪`
8. 写完之后，龚贤输入`git add -A`保存暂存盘，`git commit -m "接了乘风破浪"`，提交一个版本
9. 龚贤将这个修改提交到远程仓库`git push -u origin master`提交
10. 注意提交过程中可能产生冲突，比如说胡琼已经早龚贤一步提交了版本，这时提交不成功。
11. 龚贤可以使用`git pull`命令拉取远程服务器上最新的信息，git首先会把远程的和本地自动合并，但是也有程序无法自动合并的情况，此时需要手动去合并。
12. 龚贤保存一个版本，然后继续使用`git push -u origin master`提交，如果服务器此时没有多一个版本，那么恭喜你可以顺利推送你的信息，如果又有人比你先提交了，那么你又继续使用`git pull`拉取最新的信息。
13. 在确保远程仓库上没有更早的版本，你才可以顺利推送你的仓库，否则你要一直`git pull`拉取远程最新信息 
14. 以上是多人协作的操作流程

##### git pull

`git pull`命令用于从远程获取代码并合并本地的版本，该操作比较危险，容易造成破坏，推荐更安全的`fetch`拉取

```bash
# 语法
git pull <远程主机名> <远程分支名>:<本地分支名>

# 示例代码
git pull origin master:master

# 拉取远程的最新代码并自动合并到本地仓库
# 有时候可以省略掉origin master:master，因为之前已经建立了和远程分支跟踪，使用git remote add
git pull
```

##### git fetch

`git fetch` 命令用于从远程获取代码库，不会自动合并到本地仓库，需要你手动使用`git merge`进行合并

```bash
# 基本语法
git fetch <远程主机名> <远程分支名>:<本地分支名>

# 示例代码，以下是拉取合并常规操作

# 将origin远程仓库的主分支拉取下来，并且在本地创建temp（临时分支）
git fetch origin master:temp

# 查看拉取下来的分支内容和你本地之间的差异，如果觉得可以就合并，不可以就删除
# 查看master分支和diff分支的差异，注意不能在diff分支上查找diff的差异
# 或者你也可以git switch temp 自己眼睛查看一下
git diff temp

# 开始合并，说明你认可了拉取下来的内容
git merge temp

# 合并完成，temp临时分支就没有存在的意义了，可以删除
git branch -d temp
```

你可以大致理解为`git pull` = `git fetch` + `git merge`，这两个命令大部分情况下都差不多，但是站在安全、稳定的角度来说，推荐使用`git fetch`，因为它不会自动合并，这样就给你了检查核实的时间，确认无误再使用`git merge`合并。

##### .gitignore 上传忽略名单

有时候我们并不想把一些敏感信息、密码配置信息、设计稿源文件或者缓存文件上传到远程仓库，那么我们可以通过`.gitignore`文件设置一个忽略名单。

## 分支管理

每次提交版本到版本库，`Git`都把它们串成一条时间线，这条时间线就是一个分支。

### 什么是主分支？

当你提交一个版本时系统会自动产生一个叫`master`的分支,这个分支叫主分支。

> 注意
>
> github默认创建的是`main`作为主分支，当然你也可以修改回`master`

### 什么HEAD？

我们可以创建无数个分支，可以把`HEAD`理解为一个指针，可以理解当前的，`HEAD`指向谁，谁就是当前分支。

#### 常见的分支

1. `master/main`： 主分支
2. `release`：发行分支，主要用来发布最新版本
3. `dev/develop`：开发分支
4. `feature`：特色分支，新增功能的意思
5. `bug/hotfix`： 修复问题的分支

### 分支管理常见命令

#### git branch 查看分支

该指令用于查看本地分支，只要你提交了一个版本，就会自动给你创建一个`master`主分支

语法如下：

```bash
# 查看本地分支
git branch

# 查看本地分支详细
git branch -v

# 查看本地和远程的分支
git branch -a
```

####  git branch 创建分支

该指令用于创建本地分支

语法如下：

```bash
# 基于master主分支创建dev分支
git branch dev

# 查看分支
git branch
```

#### git switch 切换分支

该指令用于切换本地分支

语法如下：

```bash
# 切换为dev分支
git switch dev

# 查看分支
git branch
```

#### git switch -c 创建并切换分支

该指令用于创建并立即切换已创建的分支

语法如下：

```bash
# 创建并切换到bug分支
git switch -c bug

# 查看分支
git branch
```

#### git branch 删除分支

该指令用于删除本地或者远程创建的分支

```bash
# 删除本地分支
git branch -d 分支名

# 删除本地和远程分支
git branch -D 分支名
```

> 注意
>
> 不能在当前分支删除掉自己，可以先切换到其他分支，然后再删除该分支

#### git merge 合并分支

该指令用于将其他分支合并到当前分支

语法如下：

```bash
# 查看分支
git branch

# 假如你要将dev合并到master，你应该先切换到master
git switch master

# 将dev分支合并到master主分支
git merge dev
```

练习步骤：

1. 创建一个`myproject`文件夹，进入文件夹打开终端`git bash`，输入`git init`初始化一个仓库
2. 新建一个`readme.txt`，里面输入内容`我是主分支的内容`，写好之后保存关闭记事本
3. 在终端输入`git add -A`和`git commit -m "主分支初始化"`提交一个版本
4. 基于`master`主分支创建一个`dev`开发分支，终端输入`git switch -c dev`创建并切换到`dev`分支
5. 打开`readme.txt`增加修改内容为`我是开发分支内容`，保存关闭记事本
6. 在`dev`分支上，终端输入`git add -A`和`git commit -m "开发分支初始化"`提交一个版本
7. 你可以使用`git switch`来回切换`master`和`dev`分支，发现两个分支互不影响，各自独立隔离
8. 接下来我们要将`dev`分支合并到主分支上，合并完了之后，然后删除`dev`分支
9. 先切换到`master`主分支，终端输入`git switch master`切换过去
10. 当前在`master`主分支，终端输入`git merge dev`开始合并，在合并的过程中可能会产生冲突，如果合并时`master`比`dev`多一个版本提交就会产生冲突，此时需要手动解决冲突，然后合并。
11. 现在`master`分支和`dev`分支因为合并了，所以内容是一样的，此时可以删除`dev`分支
12. 终端输入`git branch -d dev`即可删除`dev`分支

#### 抓取远程分支

默认情况下，使用`git clone`只会下载一个分支，那就是默认分支，通常情况下默认分支是`master`，当然你也可以设置默认分支为其他的分支，比如`dev`，然后你使用`git clone`下载下来的就是`dev`分支，不在是`master`。如果要下载远程其他的分支呢？语法如下：

```bash
# 基于远程的某个分支创建并切换本地分支
git switch -c bug origin/bug
```



####  推送到远程指定的分支

分支类型：

1. 默认分支：开发者和仓库管理员都可以推送
2. 保护分支：只要`仓库管理员`才可以推送到保护分支
3. 常规分支：开发者和仓库管理员都可以推送
4. 只读分支：谁都无法推送，包含`仓库管理员`都无法推送

```bash
# 首先要切换到本地要被推送的分支
git switch dev

# 开始推送到远程对应的dev分支
git push -u origin dev

# 推送过程可能会产生冲突，重新拉取远程dev分支
git pull origin dev

# 或者使用git fetch
git fetch origin dev:temp
# 查看一下差异，或者使用git diff temp查看
git switch temp
# 合并temp到dev
git switch dev
git merge temp
# 合并好了之后temp没有用了
git branch -d temp

# 拉取下来之后，会和本地合并，如果产生冲突，手动解决冲突，保存一个版本
git add -A
git commit -m "手动合并了"

# 接下来再次git push
git push -u origin dev
```

## Pages服务

Pages 服务仅供简历 / 博客 / 门户 / 开源项目网站 / 开源项目静态效果演示用途

### Github提供的pages服务

具体步骤：

1. 在本地电脑新建`resume`，进入`resume`文件夹，打开`git bash`终端，输入`git init`初始化一个仓库

2. 在`resume`新建`index.html`文件，注意必须是`index.html`表示首页文件，会被自动检索到

3. 在`index.html`内容输入一些内容，比如：`<h1>欢迎光临龚贤博客</h1>`，`h1`表示标题1

4. 在终端输入`git add -A`暂存更改，再输入`git commit -m "我的简历"`

5. 打开`https://github.com/`网站，然后进行登录

6. 在`github`上，创建一个空的仓库，仓库名就叫`resume`

7. 开始将本地的`resume`仓库推送到`github`上`resume`远程仓库

8. 在终端输入`git remote add origin git@github.com:xianweb/resume.git`

9. 开始推送，终端输入`git push -f origin master`

10. 接下来开始启用`github`的`pages`服务

11. 单击右上角`Setting`设置菜单，进入`Setting`菜单后，选择左侧子菜单`Pages`

## 如何撤销已提交的代码更改？

可以使用`git revert`命令来撤销已提交的代码更改。该命令将创建一个新的提交，用于撤销指定提交引入的更改，同时保持版本历史的完整性。另一种方法是使用`git reset`命令，该命令允许将分支指针移动到先前的提交，但需要谨慎使用，因为它会改变版本历史

## 如何创建git仓库并提交版本？

```bash
# 初始化仓库
git init

# 添加到暂存盘
git add -A

# 提交一个版本
git commit -m "版本描述"
```

## git和svn的区别是？

- `git` 是分布式的，`svn`是集中式
- `git` 把内容按元数据方式存储，而 `svn`是按文件存储
- `git` 分支和`svn`的分支不同
- `git` 没有一个全局的版本号，而`svn`有全局版本
- `git` 的内容完整性要优于`svn`

## 如何解决合并冲突？

合并冲突发生在合并分支时，当两个分支的相同部分产生了不同的更改时，解决合并冲突一般步骤如下：

- 使用`git status`命令查看冲突的文件。
- 打开冲突文件，手动解决冲突并选择要保留的更改。
- 使用`git add`命令将解决冲突后的文件标记为已解决。
- 使用`git commit`命令提交解决冲突的结果。

## 如何查看提交日志？

可以使用`git log`命令查看提交日志。该命令以时间倒序列出所有提交，并显示每个提交的作者、日期、提交消息和哈希值等信息。可以通过添加不同的选项来自定义日志的输出格式和范围。

## 如何创建和合并分支？

可以使用`git branch`命令创建新分支，例如`git branch bug`。创建分支后，可以使用git checkout命令切换到新分支，例如`git checkout bug`。要将分支合并到当前分支，可以使用`git merge`命令，例如`git merge dev`。

## 如何将本地仓库与远程仓库同步？

可以使用`git fetch`或`git pull`命令从远程仓库下载最新的提交和分支信息。然后，使用`git merge`命令或`git rebase`命令将本地分支与远程分支合并。最后，使用`git push`命令将本地提交推送到远程仓库。

## 如何恢复还原到上一个版本？

```bash
# 回退到上一个版本
git reset --hard HEAD^

# 回退到指定的版本
git reset --hard 版本号
```

## 请介绍推送本地仓库到远程的过程？

```bash
# 添加暂存盘
git add -A

# 提交一个版本
git commit  -m “描述文字”

# 添加远程仓库别名
git remote add origin 仓库地址

# 推送到远程仓库
git push -u origin master
```

## 如何在git中标记重要的提交？

可以使用`git tag`命令来标记重要的提交。标签可以用于版本发布、里程碑标记等

## git仓库中的https和ssh协议的区别？

`https`协议在推送的时候会弹出登录框，输入仓库托管网站（`gitee`或者`github`等）的账户和密码，输入成功后，我们的操作系统会自动记住登录状态，下一次推送不需要再输入账号和密码

`ssh`协议需要自己生成`ssh`公钥，并且和仓库托管网站登录账户进行绑定，即可。绑定成功后，也是可以免密码登录推送的

## git log和git reflog的区别？

`git log` 查看历史版本到当前版本的日志
`git reflog` 查看所有的历史版本信息

##  请介绍git多人远程协作的流程？

**1. 克隆远程仓库**

首先，每个开发者需要将远程仓库克隆到本地：

```bash
git clone <远程仓库URL>
```

**2. 创建分支**

为了隔离开发工作，开发者应基于主分支（如 main 或 master）创建新分支：

```bash
git checkout -b <分支名>
```

**3. 开发与提交**

在本地分支上进行开发，完成后提交更改：


```bash
git add .
git commit -m "提交信息"
```

**4. 推送分支**

将本地分支推送到远程仓库：

```bash
git push origin <分支名>
```

**5. 创建 Pull Request (PR)**

在远程仓库（如 GitHub、GitLab）上，基于推送的分支创建 PR，请求将更改合并到主分支。

**6. 代码审查**

团队成员审查 PR，提出修改建议。开发者根据反馈更新代码，并推送新的提交。

**7. 合并 Pull Request (PR)**

审查通过后，将 PR 合并到主分支。

**8. 同步主分支**

合并后，开发者应拉取最新的主分支到本地，保持同步：

```bash
git checkout main
git pull origin main
```

**9. 删除已合并的分支**

合并完成后，可以删除远程和本地的已合并分支：

```bash
git push origin --delete <分支名>
git branch -d <分支名>
```

**10. 处理冲突**

如果多人修改了同一文件，可能会产生冲突。解决冲突后，标记冲突已解决并提交：

```bash
git add <冲突文件>
git commit -m "解决冲突"
```

**11. 持续集成**

许多团队使用 CI/CD 工具（如 `Jenkins`、`GitHub Actions`）自动测试和部署代码，确保每次合并后的代码质量。

**12. 定期同步**

开发者应定期拉取主分支，保持本地代码与远程仓库同步，减少冲突。

**总结**

多人协作的关键在于：

- 使用分支隔离开发

- 通过 PR 进行代码审查

- 定期同步主分支

- 及时解决冲突

这些步骤能有效提升团队协作效率，减少代码冲突。

开启新对话

## git rebase 和 git merge的区别？

**git merge**
**作用：**

将两个分支的代码合并，生成一个新的合并提交，保留两个分支的历史记录。

**特点：**

保留分支的完整历史（包括分叉和合并的上下文）。

会产生一个额外的合并提交（`Merge Commit`）。

适合在团队协作中合并公共分支（如 `main/develop`）。

 **git rebase**
**作用**：将当前分支的提交“移动”到目标分支的最新提交之后，形成一条线性的历史。

**特点：**

重写提交历史，使历史记录更清晰（无分叉）。

不会生成合并提交，但会修改原提交的哈希值（历史被改写）。

适合在本地整理提交记录，不推荐用于已推送到远程的分支。

**如何选择？**

如果分支是本地的，且想保持历史线性 → 用 `rebase`。

如果分支是公共的（已推送到远程）→ 用 `merge`。

推荐工作流：本地开发时用 `rebase` 保持整洁，合并到主分支时用 `merge`。

**一句话总结**

`git merge`：保留历史，适合协作。

`git rebase`：线性历史，适合本地优化。

## 如何解决提交版本产生冲突？

**发现冲突：**合并或变基时，`Git` 提示 `CONFLICT`。

**手动修改文件：**打开冲突文件，删除冲突标记（`<<<<<<<`、`>>>>>>>`），保留需要的代码。

**标记解决：**执行 `git add <file>` 告诉 Git 冲突已处理。

**完成操作：**

1. 合并用 `git commit	。

2. 变基用 `git rebase --continue`。

**关键区别：**

`git merge：`保留分支历史，适合公共分支（如团队协作）。

`git rebase:` 线性历史，适合本地分支整理（别对已推送的分支用！）。