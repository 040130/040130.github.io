<!DOCTYPE HTML>
<html lang="en" >
    <head>

        {%- include head.html -%}

        {% if page.previous %}
            <link rel="prev" href="{{site.baseurl}}{{page.previous.url}}" />
        {% else %}
            <link rel="prev" href="{{site.baseurl}}/" />
        {% endif %}

        {% if page.next %}
            <link rel="next" href="{{site.baseurl}}{{page.next.url}}" />
        {% endif %}
        
        <style>
            .toc-container {
                position: fixed;
                right: 0;
                top: 0;
                width: 250px;
                height: 100%;
                overflow-y: auto;
                padding: 20px;
                background-color: #f8f8f8;
                border-left: 1px solid #e0e0e0;
                z-index: 100;
            }
            
            .toc-container h3 {
                margin-top: 0;
                padding-bottom: 10px;
                border-bottom: 1px solid #e0e0e0;
            }
            
            .toc-container ul {
                list-style-type: none;
                padding-left: 15px;
            }
            
            .toc-container ul li {
                margin: 5px 0;
            }
            
            .toc-container a {
                text-decoration: none;
                color: #333;
            }
            
            .toc-container a:hover {
                color: #0074d9;
            }
            
            .page-wrapper {
                margin-right: 250px; /* Make space for the TOC */
            }
            
            @media (max-width: 1240px) {
                .toc-container {
                    display: none;
                }
                
                .page-wrapper {
                    margin-right: 0;
                }
            }
        </style>
    </head>
    <body>
        <div class="book">

            {%- include sidebar.html -%}

            <div class="book-body">
                <div class="book-header" role="navigation">
                    <!-- Title -->
                    <h1>
                        {% if page.title %}
                            <a href="." >{{ page.title | escape }}</a>
                        {% else %}
                            <a href="." >{{ site.title | escape }}</a>
                        {% endif %}
                    </h1>
                </div>

                <div class="body-inner">
                    {%- include body.html -%}

                    {% if page.previous %}
                        <a href="{{site.baseurl}}{{page.previous.url}}" class="navigation navigation-prev navigation-unique" aria-label="Previous page: {{page.previous.title}}">
                            <i class="fa fa-angle-left"></i>
                        </a>
                    {% else %}
                        <a href="{{site.baseurl}}/" class="navigation navigation-prev navigation-unique" aria-label="Previous page: {{site.title}}">
                            <i class="fa fa-angle-left"></i>
                        </a>
                    {% endif %}

                    {% if page.next %}
                        <a href="{{site.baseurl}}{{page.next.url}}" class="navigation navigation-next navigation-unique" aria-label="Next page: {{page.next.title}}">
                            <i class="fa fa-angle-right"></i>
                        </a>
                    {% endif %}
                </div>
            </div>
            
            <!-- Right-side TOC -->
            <div class="toc-container">
                <h3>Contents</h3>
                {% include toc.html html=content h_min=site.toc.h_min h_max=site.toc.h_max %}
            </div>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({%- include metadata-post.json.tpl -%});
            });
            </script>
        </div>

        {%- include footer.html -%}

    </body>
</html>